<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
</head>
<body>
  <h1>Welcome to MED Bed System Dashboard</h1>
  <p>You are now logged in (mock).</p>

<h3>Search Bed</h3>
  <input id="bedNumber" placeholder="Bed Number">
  <button onclick="getBed()">Search</button>
  <pre id="bedData"></pre>
  
<h3>Update Bed Status</h3>
  <input id="bedNumberUpdate" placeholder="Bed Number">
  <input id="bedStatus" placeholder="Status (occupied/available)">
  <input id="patientId" placeholder="Patient ID (optional)">
  <button onclick="updateBed()">Update</button>

<br><br>
  <a href="index.html">Logout</a>

  <script>
    const API_BASE = "https://ingest-service-ejguy6ecgq-ul.a.run.app"; // Cloud Run URL

    // --- Update a bed's occupancy ---
    async function updateBed() {
      const bedNum = document.getElementById("bedNumberUpdate").value;
      const status = document.getElementById("bedStatus").value;
      const patient = document.getElementById("patientId").value;

      if (!bedNum || !status) {
        alert("Please enter both bed number and status.");
        return;
      }

      try {
        const res = await fetch(`${API_BASE}/beds/update`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            bed_number: bedNum,
            bed_status: status,
            patient_id: patient
          })
        });

</body>
</html>
